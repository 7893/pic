name = "pic"
main = "src/index.ts"
compatibility_date = "2024-10-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables should be set via wrangler secrets
# Run: wrangler secret put UNSPLASH_API_KEY

[[rules]]
type = "Text"
globs = ["**/*.html"]
fallthrough = false

[[r2_buckets]]
binding = "R2"
bucket_name = "pic-r2"

[[d1_databases]]
binding = "DB"
database_name = "pic-d1"
database_id = "6e19bd43-7d51-474c-bcd7-de00cadde82e"

[ai]
binding = "AI"

[[analytics_engine_datasets]]
binding = "AE"
dataset = "pic-ae"

[[workflows]]
binding = "PHOTO_WORKFLOW"
name = "pic-photo-wf"
class_name = "DataPipelineWorkflow"

[triggers]
crons = ["0 * * * *"]
